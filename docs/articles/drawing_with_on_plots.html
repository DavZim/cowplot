<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drawing with and on plots • cowplot</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Drawing with and on plots">
<meta property="og:description" content="cowplot">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cowplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/aligning_plots.html">Aligning plots</a>
    </li>
    <li>
      <a href="../articles/drawing_with_on_plots.html">Drawing with and on plots</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Introduction to cowplot</a>
    </li>
    <li>
      <a href="../articles/mixing_plot_frameworks.html">Mixing different plotting frameworks</a>
    </li>
    <li>
      <a href="../articles/plot_grid.html">Arranging plots in a grid</a>
    </li>
    <li>
      <a href="../articles/shared_legends.html">Shared legends</a>
    </li>
    <li>
      <a href="../articles/themes.html">Themes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/wilkelab/cowplot/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="drawing_with_on_plots_files/header-attrs-2.3/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Drawing with and on plots</h1>
                        <h4 class="author">Claus O. Wilke</h4>
            
            <h4 class="date">2020-12-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/wilkelab/cowplot/blob/master/vignettes/drawing_with_on_plots.Rmd"><code>vignettes/drawing_with_on_plots.Rmd</code></a></small>
      <div class="hidden name"><code>drawing_with_on_plots.Rmd</code></div>

    </div>

    
    
<p>The cowplot package provides functions to draw with and on plots. These functions enable us to take plots and add arbitrary annotations or backgrounds, to place plots inside of other plots, to arrange plots in more complicated layouts, or to combine plots from different graphic systems (ggplot2, grid, lattice, base). This functionality is build on top of ggplot2, i.e., the resulting plots are ggplot2 objects and they can be modified, extended, and outputted just like regular ggplot2 plots.</p>
<div id="basic-annotations" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-annotations" class="anchor"></a>Basic annotations</h2>
<p>We start with some simple annotations, such as labels or watermarks. Let’s begin with a basic plot of the <code>mpg</code> dataset.</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://wilkelab.org/cowplot">cowplot</a></span>)

<span class="kw">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">displ</span>, <span class="kw">cty</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_minimal_grid.html">theme_minimal_grid</a></span>(<span class="fl">12</span>)

<span class="kw">p</span>
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-2-1.png" width="384"></p>
<p>Next we’re going to watermark this plot with the word “Draft”. To do so, we wrap the plot into a drawing environment via the <code><a href="../reference/ggdraw.html">ggdraw()</a></code> call, and then add annotations via various <code>draw_*()</code> functions.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>(<span class="kw">p</span>) <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_label.html">draw_label</a></span>(<span class="st">"Draft"</span>, color = <span class="st">"#C0A0A0"</span>, size = <span class="fl">100</span>, angle = <span class="fl">45</span>)
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-3-1.png" width="384"></p>
<p>What <code><a href="../reference/ggdraw.html">ggdraw(p)</a></code> does is it captures a snapshot of the plot, so that the plot effectively turns into an image, and then it draws that image into a new ggplot2 canvas without visible axes or background grid. The <code>draw_*</code> functions are simply wrappers around regular geoms. So, in the above example we could have used <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code> instead of <code><a href="../reference/draw_label.html">draw_label()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>(<span class="kw">p</span>) <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span>(
    data = <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(x = <span class="fl">0.5</span>, y = <span class="fl">0.5</span>, label = <span class="st">"Draft"</span>),
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span>, <span class="kw">y</span>, label = <span class="kw">label</span>),
    hjust = <span class="fl">0.5</span>, vjust = <span class="fl">0.5</span>, angle = <span class="fl">45</span>, size = <span class="fl">100</span><span class="op">/</span><span class="kw">.pt</span>,
    color = <span class="st">"#C0A0A0"</span>,
    inherit.aes = <span class="fl">FALSE</span>
  )
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-4-1.png" width="384"></p>
<p>However, notice how much more verbose the call to <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code> is. Also, <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code> interprets font sizes in mm, so we need to divide by <code>.pt</code> if we want to specify font sizes in the more conventional point metric. By contrast, <code><a href="../reference/draw_label.html">draw_label()</a></code> performs this conversion for us, so we can specify font sizes directly in points.</p>
<p>Because <code><a href="../reference/ggdraw.html">ggdraw()</a></code> is built on top of ggplot2, we can treat its output like a ggplot2 plot. For example, we can use the <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> function to change the background color.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>(<span class="kw">p</span>) <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_label.html">draw_label</a></span>(<span class="st">"Draft"</span>, color = <span class="st">"#C0A0A0"</span>, size = <span class="fl">100</span>, angle = <span class="fl">45</span>) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(
    plot.background = <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span>(fill = <span class="st">"cornsilk"</span>, color = <span class="fl">NA</span>)
  )
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-5-1.png" width="384"></p>
<p>We can also save the annotated plots in the standard way via <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">draft</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>(<span class="kw">p</span>) <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_label.html">draw_label</a></span>(<span class="st">"Draft"</span>, color = <span class="st">"#C0A0A0"</span>, size = <span class="fl">100</span>, angle = <span class="fl">45</span>)

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave</a></span>(<span class="st">"draft.pdf"</span>, <span class="kw">draft</span>)
</pre></div>
<p>(However, the cowplot package provides an alternative to <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggsave()</a></code>, the function <code><a href="../reference/save_plot.html">save_plot()</a></code>, which makes it easier to save plots with appropriate sizing, in particular when making compound plots. See the documentation of <code><a href="../reference/save_plot.html">save_plot()</a></code> for details.)</p>
<p>Frequently, we may want to have the annotations underneath the plot rather than on top of it. We can achieve this effect by first setting up an empty drawing layer with <code><a href="../reference/ggdraw.html">ggdraw()</a></code>, then adding the label, and then adding the plot with <code><a href="../reference/draw_plot.html">draw_plot()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>() <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_label.html">draw_label</a></span>(<span class="st">"Draft"</span>, color = <span class="st">"#C0A0A0"</span>, size = <span class="fl">100</span>, angle = <span class="fl">45</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_plot.html">draw_plot</a></span>(<span class="kw">p</span>)
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-7-1.png" width="384"></p>
<p>This requires that the plot has a transparent background, and all cowplot themes meet this requirement. By contrast, this is not necessarily the case for ggplot2 themes. For example, if we change the theme of the plot to <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic()</a></code> the underlying label is hidden by the theme’s white background.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>() <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_label.html">draw_label</a></span>(<span class="st">"Draft"</span>, color = <span class="st">"#C0A0A0"</span>, size = <span class="fl">100</span>, angle = <span class="fl">45</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_plot.html">draw_plot</a></span>(
    <span class="kw">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>()
  )
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-8-1.png" width="384"></p>
<p>The cowplot theme <code><a href="../reference/theme_cowplot.html">theme_half_open()</a></code> does not have this limitation.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>() <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_label.html">draw_label</a></span>(<span class="st">"Draft"</span>, color = <span class="st">"#C0A0A0"</span>, size = <span class="fl">100</span>, angle = <span class="fl">45</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_plot.html">draw_plot</a></span>(
    <span class="kw">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/theme_cowplot.html">theme_half_open</a></span>(<span class="fl">12</span>)
  )
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-9-1.png" width="384"></p>
</div>
<div id="making-inset-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#making-inset-plots" class="anchor"></a>Making inset plots</h2>
<p>The <code><a href="../reference/draw_plot.html">draw_plot()</a></code> function also allows us to place plots at arbitrary locations and at arbitrary sizes onto the canvas. This is useful for combining subplots into a layout that is not a simple grid, e.g. with an inset plotted inside a larger graph.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw">inset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">drv</span>)) <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span>(fill = <span class="st">"skyblue2"</span>, alpha = <span class="fl">0.7</span>) <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span>(expand = <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html">expansion</a></span>(mult = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0.05</span>))) <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_minimal_grid.html">theme_minimal_hgrid</a></span>(<span class="fl">11</span>)

<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>(<span class="kw">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/theme_cowplot.html">theme_half_open</a></span>(<span class="fl">12</span>)) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_plot.html">draw_plot</a></span>(<span class="kw">inset</span>, <span class="fl">.45</span>, <span class="fl">.45</span>, <span class="fl">.5</span>, <span class="fl">.5</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_plot_label.html">draw_plot_label</a></span>(
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0.45</span>),
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">0.95</span>),
    size = <span class="fl">12</span>
  )
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
<p>This feature is not limited to ggplot2 plots. It works with base graphics as well.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="kw">inset</span> <span class="op">&lt;-</span> <span class="op">~</span>{
  <span class="kw">counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span>(<span class="kw">mpg</span><span class="op">$</span><span class="kw">drv</span>)
  <span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span>(
    cex = <span class="fl">0.8</span>,
    mar = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">1</span>),
    mgp = <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0</span>)
  )
  <span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html">barplot</a></span>(<span class="kw">counts</span>, xlab = <span class="st">"drv"</span>, ylab = <span class="st">"count"</span>)
}

<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>(<span class="kw">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/theme_cowplot.html">theme_half_open</a></span>(<span class="fl">12</span>)) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_plot.html">draw_plot</a></span>(<span class="kw">inset</span>, <span class="fl">.45</span>, <span class="fl">.45</span>, <span class="fl">.5</span>, <span class="fl">.5</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_plot_label.html">draw_plot_label</a></span>(
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"A"</span>, <span class="st">"B"</span>),
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0.45</span>),
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>, <span class="fl">0.95</span>),
    size = <span class="fl">12</span>
  )
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
</div>
<div id="absolute-positioning" class="section level2">
<h2 class="hasAnchor">
<a href="#absolute-positioning" class="anchor"></a>Absolute positioning</h2>
<p>By default, the coordinate system used by <code><a href="../reference/ggdraw.html">ggdraw()</a></code> uses relative coordinates running from 0 to 1 for both x and y. Sometimes, however, we need to be able to place graphical elements at absolute units, e.g. exactly 1 inch from the left border. We can do so via the grid graphic system, which is supported through the <code><a href="../reference/draw_grob.html">draw_grob()</a></code> function. For example, the following code generates a blue square of 1 inch width and height that is located exactly 1 inch from the left and 1 inch from the top border of the plot area.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw">grid</span>)
<span class="kw">rect</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html">rectGrob</a></span>(
  x = <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span>(<span class="fl">1</span>, <span class="st">"in"</span>),
  y = <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span>(<span class="fl">1</span>, <span class="st">"npc"</span>) <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span>(<span class="fl">1</span>, <span class="st">"in"</span>),
  width = <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span>(<span class="fl">1</span>, <span class="st">"in"</span>),
  height = <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span>(<span class="fl">1</span>, <span class="st">"in"</span>),
  hjust = <span class="fl">0</span>, vjust = <span class="fl">1</span>,
  gp = <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html">gpar</a></span>(fill = <span class="st">"skyblue2"</span>, alpha = <span class="fl">0.5</span>)
)

<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>(<span class="kw">p</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_grob.html">draw_grob</a></span>(<span class="kw">rect</span>)
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-12-1.png" width="384"></p>
<p>If we regenerate the plot in a different size, the blue square remains at the same absolute position and retains its absolute size.</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>(<span class="kw">p</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_grob.html">draw_grob</a></span>(<span class="kw">rect</span>)
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-13-1.png" width="480"></p>
</div>
<div id="combining-plots-and-images" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-plots-and-images" class="anchor"></a>Combining plots and images</h2>
<p>The drawing layer also supports images, through the function <code><a href="../reference/draw_image.html">draw_image()</a></code>. This function, which requires the <a href="https://CRAN.R-project.org/package=magick">magick</a> package to be installed, can take images in many different formats and combine them with plots. For example, we can use an image as a plot background:</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://docs.ropensci.org/magick">magick</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org">dplyr</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="http://forcats.tidyverse.org">forcats</a></span>)

<span class="kw">img</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"cow.jpg"</span>, package = <span class="st">"cowplot"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://docs.ropensci.org/magick/reference/editing.html">image_read</a></span>() <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://docs.ropensci.org/magick/reference/transform.html">image_resize</a></span>(<span class="st">"570x380"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://docs.ropensci.org/magick/reference/color.html">image_colorize</a></span>(<span class="fl">35</span>, <span class="st">"white"</span>)

<span class="kw">p</span> <span class="op">&lt;-</span> <span class="kw">PASWR</span>::<span class="kw"><a href="https://rdrr.io/pkg/PASWR/man/Cows.html">Cows</a></span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw">breed</span> != <span class="st">"Canadian"</span>) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(breed = <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span>(<span class="kw">breed</span>, <span class="kw">butterfat</span>)) <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">butterfat</span>, fill = <span class="kw">breed</span>)) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span>(alpha = <span class="fl">0.7</span>) <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_grey.html">scale_fill_grey</a></span>() <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span>(expand = <span class="fl">FALSE</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/theme_minimal_grid.html">theme_minimal_hgrid</a></span>(<span class="fl">11</span>, color = <span class="st">"grey30"</span>)

<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>() <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_image.html">draw_image</a></span>(<span class="kw">img</span>) <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_plot.html">draw_plot</a></span>(<span class="kw">p</span>)
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-14-1.png" width="547.2"></p>
<p>We can also add an image as a logo onto a plot. We use <code>halign</code> and <code>valign</code> in addition to <code>hjust</code> and <code>vjust</code> to align the image flush in the top right corner.</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="kw">logo_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"logo.png"</span>, package = <span class="st">"cowplot"</span>)

<span class="fu"><a href="../reference/ggdraw.html">ggdraw</a></span>() <span class="op">+</span> 
  <span class="fu"><a href="../reference/draw_plot.html">draw_plot</a></span>(<span class="kw">p</span>) <span class="op">+</span>
  <span class="fu"><a href="../reference/draw_image.html">draw_image</a></span>(
    <span class="kw">logo_file</span>, x = <span class="fl">1</span>, y = <span class="fl">1</span>, hjust = <span class="fl">1</span>, vjust = <span class="fl">1</span>, halign = <span class="fl">1</span>, valign = <span class="fl">1</span>,
    width = <span class="fl">0.15</span>
  )
</pre></div>
<p><img src="drawing_with_on_plots_files/figure-html/unnamed-chunk-15-1.png" width="547.2"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Claus O. Wilke.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
